<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>UI 1.0 Toolkit</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="[2014-09-18 Thursday]"/>
<meta name="author" content="Virtual Labs Engineering and Architecture Division (VLEAD)"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/worg-style.css" />
<link rel="stylesheet" type="text/css" href="css/override.css" />
<script type="text/javascript" src="js/org-info.js"></script>
<script type="text/javascript" >
<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "1");
org_html_manager.set("LINK_HOME", "index.html");
org_html_manager.set("LINK_UP", "index.html");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="org-div-home-and-up" style="text-align:right;font-size:70%;white-space:nowrap;">
 <a accesskey="h" href="index.html"> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div>

<h1 class="title">UI 1.0 Toolkit</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Introduction to UI Toolkit </a>
<ul>
<li><a href="#sec-1.1">1.1 What is the purpose of the UI Toolkit? </a></li>
</ul>
</li>
<li><a href="#sec-2">2 Structure of the Lab </a></li>
<li><a href="#sec-3">3 The UI Template structure </a></li>
<li><a href="#sec-4">4 How to use the template? </a>
<ul>
<li><a href="#sec-4.1">4.1 Case 1: Unstructured labs </a>
<ul>
<li><a href="#sec-4.1.1">4.1.1 Procedure for using scripts </a></li>
</ul>
</li>
<li><a href="#sec-4.2">4.2 Case 2: Labs hosted with Collaborator Framework (Amrita Format) </a>
<ul>
<li><a href="#sec-4.2.1">4.2.1 Necessary instructions for using scripts </a></li>
<li><a href="#sec-4.2.2">4.2.2 Procedure for using scripts </a></li>
<li><a href="#sec-4.2.3">4.2.3 Organize the downloaded content </a></li>
<li><a href="#sec-4.2.4">4.2.4 Execute the script to transfer content for a lab </a></li>
<li><a href="#sec-4.2.5">4.2.5 Transfer the content into blue-icon theme format </a></li>
<li><a href="#sec-4.2.6">4.2.6 Observe the UI transfer(mapping) </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction to UI Toolkit </h2>
<div class="outline-text-2" id="text-1">


<p>
The UI Toolkit consists of the Virtual Labs User Interface framework. Apart from the Virtual Labs UI 1.0 template, the toolkit also contains helper scripts that 
extract the content of labs hosted in Amrita UI format to  UI 1.0 framework. 
The objective of using UI Toolkit 1.0 is to standardize the formats of all labs according to the Virtual-labs UI 1.0 framework.
</p>
<p>
Therefore, UI Toolkit 1.0 is a compilation of software tools used to build software programs that can run on the web. The toolkit is browser-compatible as it is based on Web Standards such as HTML5, CSS and Java Script.The Virtual Labs UI 1.0 framework provides a set of CSS 
classes and/or Java script functions that:
</p><ol>
<li>
Simplify the development of the layout
</li>
<li>
Provide an attractive look and feel
</li>
<li>
Provide consistent results across browsers with a lot of useful components.

</li>
</ol>

<p>The toolkit uses html5/css because the objective is to build a reusable design framework for all the labs.
</p>
</div>

<div id="outline-container-1.1" class="outline-3">
<h3 id="sec-1.1"><span class="section-number-3">1.1</span> What is the purpose of the UI Toolkit? </h3>
<div class="outline-text-3" id="text-1.1">

<ul>
<li>
<b>Unified look and feel:</b> The UI Toolkit offers a uniform user interface for authoring and interacting with the virtual labs. It also provides the labs a simple and uniform web interface and a homogeneous hosting framework.
</li>
<li>
<b>Coding standards:</b> The Toolkit ensures that lab developers follow good programming practices to make the code of the labs efficient and readable. 
</li>
<li>
<b>Upgrading widgets and components:</b> The UI 1.0 template makes it easy for lab developers to modify and update widgets and/or components.  
</li>
<li>
<b>Provision for better versions of template:</b> In future, if advanced versions of the UI template are created, the lab developers can transfer the lab content automatically as per the newer versions.

</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Structure of the Lab </h2>
<div class="outline-text-2" id="text-2">

<p>Below are the instructions for a lab developer to structure the lab as per UI template 1.0.
</p>
<p>
a) As a lab developer, after you have the content (theory, procedures, 
experiment, simulations, quiz, images, videos etc.) of your lab ready, you need to understand the structure of the lab according to UI template 1.0.
</p>
<p>
<img src="./images/labs-structure.png"  alt="./images/labs-structure.png" />
</p>
<p>
The structure of the lab is displayed in the diagram above.
</p>
<p>
b) The ui/ directory has <code>src</code> and <code>scripts</code> directory inside it.
The ui/ directory has the following file structure:
</p>


<pre class="example">ui/src/lab/     
</pre>



<p>
All the source files of the lab are in this location. The index.html and default.html files are available as read-only because these files need not be edited. 
If you want to edit the html pages, you should edit only the content.html file in ui/src/lab/ and the ui/src/lab/exp1/ directory.
</p>
<p>
c) While adding new experiments, make sure you create new directories following the same structure under ui/src/lab/"EXPERIMENT-ID" and change the content.html in the same directory. Do not edit the files index.html and default.html in the same directory. The ui/src/lab directory also contains js, images, and css directories. These directories hold your own custom files.   
</p>


<pre class="example">ui/src/lib/     
</pre>



<p>
All the library files (like MathJax, jQuery, modernizr) are in this directory.
</p>


<pre class="example">ui/src/themes/  
</pre>




<p>
d) You need to choose the blue-icon (uses the iitb style, which uses icons for sections) to design the theme of the lab. The current release also has a maroon-grid (which uses iiith style, which does not display icons). Of course, you are free to design your own theme, and place it in the themes directory.
</p>



<pre class="example">ui/src/makefile         
</pre>



<p>
This file is used for building a release.
</p>



<pre class="example">ui/scripts      
</pre>




<p>
The scripts folder should contain json file (lab descriptor), shell scripts, dependencies file.
</p>
<p>
<img src="images/scripts.png"  alt="images/scripts.png" />  
</p>
<ul>
<li>
<b>Build:</b> Build Script runs the <b>makefile</b> and copies the build folder to <b>local host</b>. The script is invoked by <b>initialize</b> script.
</li>
<li>
<b>Dependencies:</b> This file contains all the server-side dependencies of the lab as <b>dependencies.txt</b>
</li>
<li>
<b>Initialize:</b> The <b>initialize</b> script creates the initial environment for the lab by installing the server side dependencies for the lab and invokes the <b>build</b> script. To use <b>initialize</b> script, the lab developer must run the command ??.initialize scripts/dependencies.txt.?? <b>initialize</b> script takes dependencies.txt as an argument and installs the packages mentioned in the dependencies.txt file.
</li>
<li>
<b>Backup:</b> Stores the backup of the database used by the lab.
</li>
<li>
<b>Restore:</b> The <b>Restore</b> script restores the backup of the database used by the lab.
</li>
<li>
<b>Shutdown:</b> The <b>shutdown</b> script stops all the services on the container required to run the lab for the safe dissembling of the lab.
</li>
<li>
<b>Startup:</b> The <b>startup</b> script starts all the services on the container required to run the lab.
</li>
<li>
<b>labspec.json:</b> This is an automated script for building the lab on container automatically.

</li>
</ul>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> The UI Template structure </h2>
<div class="outline-text-2" id="text-3">

<p>All the labs should follow the general structure of the template. 
</p>
<p>
<img src="images/html-lab-page-design.png"  alt="images/html-lab-page-design.png" />
</p>
<p>
The template has three sections: Header, Article and Footer.
</p>
<p>
<b>Header</b> contains the logo and heading of the page.
<b>Article</b> contains the content of the page. It can be further divided into sub-sections such as header, footer, content etc.
<b>Footer</b> contains the licensing details. The lab developer may add the logo of the institute here. Header and Footer remains the same for all the webpages.
</p>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> How to use the template? </h2>
<div class="outline-text-2" id="text-4">

<p>There are two ways to convert a lab based on the cases below 
</p>
</div>

<div id="outline-container-4.1" class="outline-3">
<h3 id="sec-4.1"><span class="section-number-3">4.1</span> Case 1: Unstructured labs </h3>
<div class="outline-text-3" id="text-4.1">


<p>
<b>Editing the file content.html placed within lab folder</b>
</p>
<p>
This template features a demo of a science lab with a sample "simple pendulum" experiment. The following section will help the lab developer configure 
this template as per his/her lab experiments.
</p>
<ol>
<li>
Mention the lab name under header and place the labs content under
</li>
</ol>

<p>article followed by sections and order the articles accordingly.
</p><ol>
<li>
List out the experiments in content.html.
</li>
</ol>

<p>This is how the html page of the lab should be structured and 
we recommend to use these id's for the lab.
</p>
<p>
The ui/src/lab/ directory contains three files:
</p><ul>
<li>
index.html
</li>
<li>
default.html
</li>
<li>
content.html
</li>
</ul>

<p><img src="images/html-id-specific-lab-page-design.png"  alt="images/html-id-specific-lab-page-design.png" />
</p>
<p>
<b>Editing content.html placed within each experiment folder</b>
</p>
<p>
The same structure has been followed inside the ui/src/lab/"EXPERIMENT_ID" directory. The description and the read-write permits for those file are tabulated as follows :
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="left" /><col align="left" />
</colgroup>
<thead>
<tr><th scope="col">file</th><th scope="col">permissions</th><th scope="col">description</th></tr>
</thead>
<tbody>
<tr><td>index.html</td><td>read-only</td><td>home-page</td></tr>
<tr><td>default.html</td><td>read-only</td><td>default-content</td></tr>
<tr><td>content.html</td><td>read-write</td><td>editable-content</td></tr>
</tbody>
</table>



<p>
<img src="images/html-id-specific-experiment-page-design.png"  alt="images/html-id-specific-experiment-page-design.png" />
</p>
<p>
This is how the html page of the experiment should be structured and 
we recommend to use these ids for the experiments.
</p>

</div>

<div id="outline-container-4.1.1" class="outline-4">
<h4 id="sec-4.1.1"><span class="section-number-4">4.1.1</span> Procedure for using scripts </h4>
<div class="outline-text-4" id="text-4.1.1">

<ol>
<li>
After the content is added, edit the "dependencies.txt" file and list out all the dependencies of the lab. 
</li>
<li>
Based on the operating system, scripts will differ. Therefore, check the scripts being used. If the operating system used is "CentOS", use "centos-template" scripts otherwise use "ubuntu-template" scripts.
</li>
<li>
Next, copy the scripts from the desired template (i.e. ubuntu-template or centos-template) and paste inside the template folder.
</li>
<li>
Now open the terminal and change the directory to template and then scripts.
</li>
<li>
Run the following commands



<pre class="example">chmod 777 initialise.sh
./initialise.sh
</pre>



</li>
</ol>

<p>This script will automatically installs all the dependencies and will run the "make" file in order to generate a build folder.
</p>
<p>
<b>Note:</b> if you come across any error while running the script, you need to login as root user and follow the same procedure.
</p>


<pre class="example">sudo su 
or
su -
</pre>



</div>
</div>

</div>

<div id="outline-container-4.2" class="outline-3">
<h3 id="sec-4.2"><span class="section-number-3">4.2</span> Case 2: Labs hosted with Collaborator Framework (Amrita Format) </h3>
<div class="outline-text-3" id="text-4.2">

<p>To convert labs from the Collaborative framework (Amrita format) to UI 1.0, we have helper scripts in the UI
toolkit that automates the process to a large extent, however, there are some changes 
that need to be done manually.
</p>
<p>
Below is the framework of labs in Collaborative (Amrita) format.
</p>
<p>
<img src="images/amrita-format.jpg"  alt="images/amrita-format.jpg" />
</p>

</div>

<div id="outline-container-4.2.1" class="outline-4">
<h4 id="sec-4.2.1"><span class="section-number-4">4.2.1</span> Necessary instructions for using scripts </h4>
<div class="outline-text-4" id="text-4.2.1">

<p>For example, let us chose a lab at random as below:
(<a href="http://iitkgp.vlab.co.in/?sub=39&amp;brch=124&amp;sim=922&amp;cnt=1">http://iitkgp.vlab.co.in/?sub=39&amp;brch=124&amp;sim=922&amp;cnt=1</a>)
</p>
<p>
The breakup of the url is as per the following scheme:   
</p><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="left" />
</colgroup>
<thead>
<tr><th scope="col">url format</th><th scope="col">example</th></tr>
</thead>
<tbody>
<tr><td>sub=39(subjects or domains)</td><td>Electrical Engineering</td></tr>
</tbody>
<tbody>
<tr><td>brch=124(branch or lab)</td><td>Analog Signals, Network and Measurement Laboratory</td></tr>
</tbody>
<tbody>
<tr><td>sim=922(experiment)</td><td>Verification of Superposition Theorem</td></tr>
</tbody>
<tbody>
<tr><td>cnt=1(the breakup of pages under each experiment)</td><td>Introduction, Aim, Theory etc</td></tr>
</tbody>
</table>

organise.sh is a shell script to get the content from the lab url and store it in an organized format as university-&gt;subject-&gt;branch-&gt;labs-&gt;experiments.

<p>
Now the structure of the lab is analyzed and the script breaks 
up the url accordingly and creates the folders recursively in an organized format.
</p>
<ul>
<li>
<b>scrapper.py</b>
</li>
</ul>

<p>scrapper.py is a python based script to transfer the content under one lab-experiment in an 
automated way to the requisite UI format, which is the new Blue-icon theme format.
</p>
<p>
A Python library called "Beautiful Soup" designed to parse xml, html5 files 
and tree traversals has been used here to parse the content of each 
lab-experiment's html files. The parsed content is mapped to the Blue-icon 
theme format and copied into the "content.html" using python commands. 
</p>
<p>
Ref: <a href="http://www.crummy.com/software/BeautifulSoup/">http://www.crummy.com/software/BeautifulSoup/</a>
</p>
<ul>
<li>
<b>link_changer.sh</b>
</li>
</ul>

<p>link_changer.sh is also a shell script to link the images downloaded in the <b>userfiles</b> folder to <b>contents.html</b> of the lab-experiments mapped using the former scheme.
</p>
<p>
Here the script replaces the path of the images inside each content.html file for all
experiments in the lab with the appropriate and desired path of the new directory after
the mapping is done.
</p>
<ul>
<li>
<b>all.sh</b>
</li>
</ul>

<p>This script file automatically runs both scrapper.py and link_changer.sh. It also builds the lab automatically.
</p>
<p>
<b>Note:</b> Follow the same procedure for every experiment. After converting all the experiments, rename the "exp1" folder experiment-wise such as: exp1, exp2, exp3 so on and place them inside lab folder.
</p>
</div>

</div>

<div id="outline-container-4.2.2" class="outline-4">
<h4 id="sec-4.2.2"><span class="section-number-4">4.2.2</span> Procedure for using scripts </h4>
<div class="outline-text-4" id="text-4.2.2">

<p>The following instructions will help port content from the Collaborative format (Amrita format) theme to Blue-icon theme.
</p><ul>
<li id="sec-4.2.2.1"><b>Check out the scripts from github</b> <br/>
Check out the lik (lab integration kit) from github




<pre class="example">git clone https://github.com/vlead/ui-1.0-tool-kit.git
</pre>



<p>
Find the scripts from following path:
</p>
<p>
Go to: ui-1.0-tool-kit-&gt;scripts/
</p>
</li>
<li id="sec-4.2.2.2"><b>Download and store the content</b> <br/>
Create a folder called "map"



<pre class="example">&gt; mkdir map
</pre>




</li>
<li id="sec-4.2.2.3"><b>Move into the folder map</b> <br/>



<pre class="example">&gt; cd map
</pre>




</li>
<li id="sec-4.2.2.4"><b>Getting the content from desired url</b> <br/>
Run the wget command under the some directory.



<pre class="example">&gt; wget -r -e robots=off http://iitkgp.vlabs.co.in
</pre>




</li>
</ul>
</div>

</div>

<div id="outline-container-4.2.3" class="outline-4">
<h4 id="sec-4.2.3"><span class="section-number-4">4.2.3</span> Organize the downloaded content </h4>
<div class="outline-text-4" id="text-4.2.3">

<p>Run the organise .sh file and prior to that give it execute permission.
</p>



<pre class="example">&gt; chmod 777 organise.sh
&gt; ./organize.sh
</pre>




</div>

</div>

<div id="outline-container-4.2.4" class="outline-4">
<h4 id="sec-4.2.4"><span class="section-number-4">4.2.4</span> Execute the script to transfer content for a lab </h4>
<div class="outline-text-4" id="text-4.2.4">

<p>For each lab, you need to run the code manually for each page and more 
precisely for all the "cnt" number under each experiment (or simulation).
The command to do it are given in following subsections:
Go inside the subject-&gt;branch-&gt;lab-&gt;experiment
use cd command followed by path name.
</p>
</div>

</div>

<div id="outline-container-4.2.5" class="outline-4">
<h4 id="sec-4.2.5"><span class="section-number-4">4.2.5</span> Transfer the content into blue-icon theme format </h4>
<div class="outline-text-4" id="text-4.2.5">

<p>"scrapper.py" is used to transfer the content from the Collaborative framework (Amrita's format) to UI 1.0.
"link_changer.sh" is used to update the links to the images inside the experiment.
"make" is used to build the lab.
</p>
<p>
run the following command:
</p>



<pre class="example">&gt; ./all.py 
</pre>




<p>
<b>Note:</b> if any error occurs while running this script then log in as a root user and follow the same procedure.
</p>


<pre class="example">sudo su 
or
su -
</pre>




<p>
<b>Note:</b> all.py will automatically run "scrapper.py", "link_changer.sh" and "make". It will open in the browser 
with Simple pendulum sample experiment. So, click on that link. 
The template should be ready with the content added, but the 
images at each tab may be missing. It may be like this:
</p>
<p>
<img src="images/screenshot2.png"  alt="images/screenshot2.png" />
</p>
<p>
<b>Note:</b> In such a case, copy the images from the /template/src/lab/images and 
place them in the same path that the experiment follows. 
</p>
</div>

</div>

<div id="outline-container-4.2.6" class="outline-4">
<h4 id="sec-4.2.6"><span class="section-number-4">4.2.6</span> Observe the UI transfer(mapping) </h4>
<div class="outline-text-4" id="text-4.2.6">

<p>This is how the lab is structured after conversion.
</p>

<p>
<img src="images/screenshot1.png"  alt="images/screenshot1.png" />  
</p>


</div>
</div>
</div>
</div>
<div id="postamble">
<p class="author"> Author: Virtual Labs Engineering and Architecture Division (VLEAD)
<a href="mailto:soujanya@soujanya-laptop">&lt;soujanya@soujanya-laptop&gt;</a>
</p>
<p class="date"> Date: [2014-09-18 Thursday]</p>
<p class="creator">HTML generated by org-mode 6.33x in emacs 23</p>
</div>
</div>
</body>
</html>
